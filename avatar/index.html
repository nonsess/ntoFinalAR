<!DOCTYPE html> 
<html lang="ru"> 
<head> 
  <meta charset="UTF-8" /> 
  <meta name="viewport" content="width=device-width" /> 

  <title>Гид по Байкалу FlyBaikal</title>
  <link rel="stylesheet" href="../globals.css">
  <link rel="stylesheet" href="index.css"></link>
  <script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@1c2407b26c61958baa93967b5412487cd94b290b/dist/aframe-master.min.js"></script> 
  <script src="build/aframe-ar.js"></script>
  <script src="index.js"></script>
  <script src="marker.js"></script>

</head>
<body>   
  <a-scene
      embedded
      arjs="sourceType: webcam; debugUIEnabled: false; trackingMethod: best;"
      vr-mode-ui="enabled: false"
    >
      <div id="history-modal" class="modal" style="display: none;">
        <div id="history-content" class="modal-content">
          <div class="modal-header">
            <h2>История чата</h2>
            <button id="close-history">&times;</button>
          </div>
          <div id="history-messages"></div>
        </div>
      </div>

      <div id="error-modal" class="modal" style="display: none;">
        <div class="modal-content">
          <div class="modal-header">
            <h2>Ошибка</h2>
            <button class="close-modal">&times;</button>
          </div>
          <p id="error-message">Произошла ошибка, попробуй позже. Мы уже работаем над решением этой проблемы</p>
        </div>
      </div>

      <div id="camera-permission-prompt" class="camera-prompt">
        <p>Для того чтобы поговорить с Аркадием, пожалуйста, предоставь доступ к камере.</p>
        <button id="request-camera-access">Проверить</button>
      </div>

      <a-marker
        id="marker"
        type="pattern"
        url="ourmarker.patt"
        marker-persistence
        emitevents="true"
        smooth="true"
        smoothCount="5"
        smoothTolerance="0.01"
        smoothThreshold="2"
      >
        <a-entity
          id="model-entity"
          gltf-model="url(/public/models/chaika.glb)"
          position='4 -1 0'
          rotation="270 180 180">
        </a-entity>

        <a-entity
          id="nerpa-entity"
          gltf-model="url(/public/models/nerpa.glb)"
          rotation="270 180 180">
        </a-entity>

        <a-entity
          id="omul-entity"
          gltf-model="url(/public/models/omul.glb)"
          position='3.5 -1 0'
          rotation="270 180 180">
        </a-entity>
      </a-marker>
      
      <a-entity camera></a-entity> 

  </a-scene>
    
  <div class="chat">
    <div id="chat-container">
      <button id="history-button">История <img src="/public/history.png" alt="История"></button>
      <input type="text" id="user-input" placeholder="Задай вопрос..." />
      <button id="send-button">Узнать</button>
    </div>
  </div>

  <script src="chat.js"></script>
  <script src="animations.js"></script>

</body>